services:
  redink:
    # 本地构建镜像，使用当前目录的 Dockerfile
    build:
      context: .
      dockerfile: Dockerfile
    image: redink:local
    container_name: redink
    ports:
      - "52098:12398"
    volumes:
      # 持久化输出目录
      - ./output:/app/output
      # 可选：挂载自定义配置文件（避免重建镜像后丢失配置）
      - ./docker/text_providers.yaml:/app/text_providers.yaml
      - ./docker/image_providers.yaml:/app/image_providers.yaml
    restart: unless-stopped
